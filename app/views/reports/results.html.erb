<p>
  <strong>Name:</strong>
  <%= @report.name %>
</p>

<p>
  <strong>People:</strong>
    <% if @report.people %>
      <ul>
        <% @report.report_people.each do |report_person| %>
          <li><%= report_person.person.email %>
          </li>
        <% end %>
      </ul>
    <% end %>
</p>

<p>
<strong>Expenses:</strong>
  <table>
    <tr>
      <th>Vendor</th>
      <th>Date</th>
      <th>Amount</th>
      <th>Who Paid</th>
    </tr>
    <% @report.expenses.each do |expense| %>
      <tr>
        <td><%= expense.vendor %></td>
        <td><%= expense.date %></td>
        <td><%= number_to_currency(expense.amount/100.00) %></td>
        <td><%= expense.person.email %></td>
      </tr>
    <% end %>
  </table>
</p>

<p>Expense total: <%= number_to_currency(@report.sum_expenses) %></p>
<p>Individual obligation: <%= number_to_currency(@report.individual_obligation) %></p>

<p>
<strong>Reconciliation:</strong>
  <table>
    <tr>
      <th>Email</th>
      <th>Amount</th>
    </tr>
    <% @report.determine_owed_amounts.each do |email, amount| %>
      <tr>
        <td><%= email %></td>
        <td><%= number_to_currency(amount) %></td>
      </tr>
    <% end %>
  </table>
</p>

<p>
<strong>People Who Need to Pay:</strong>
  <table>
    <tr>
      <th>Email</th>
      <th>Amount Owed</th>
      <th>Owed To</th>
    </tr>
    <% @report.payments.each do |payment| %>
        <tr>
          <td><%= payment.person.email %></td>
          <td><%= number_to_currency(payment.amount_owed/100.00) %></td>
          <td><%= payment.owed_to_person.email %></td>
        </tr>
      <% end %>
  </table>
</p>

<%= link_to 'Back', reports_path %><br>
<%= link_to 'Delete Report', report_path(@report),
              method: :delete,
              data: { confirm: 'Are you sure?' } %>
