<div class="container-fluid">

  <div class="row-fluid">
    <div class="col-xs-12 col-sm-6 col-sm-offset-3">
      <strong>Report Name:</strong>
        <%= @report.name %>
        <%= link_to 'Edit Name', edit_report_path(@report),
                                 class:'btn btn-default btn-xs' %>
    </div>
  </div><br><br>

  <div class="row-fluid">
    <div class="col-xs-12 col-sm-6 col-sm-offset-3">
      <strong>People in Group:</strong>
      <%= link_to 'Add New Person', report_people_new_path(@report),
                                    class:'btn btn-default btn-xs' %>
        <% if @report.people %>
          <table class="table table-striped">
            <tr>
              <th>Email</th>
              <th>Remove?</th>
            </tr>

            <% @report.report_people.each do |report_person| %>
              <tr>
                <td><%= report_person.person.email %></td>
                <td><%= link_to 'Remove', report_report_person_path(@report,report_person),
                                          class:'btn btn-danger btn-xs',
                                          method: :delete,
                                          data: { confirm: 'Are you sure?' } %></td>
              </tr>
            <% end %>
          </table>
        <% end %>
    </div>
  </div>

  <div class="row-fluid">
    <div class="col-xs-12 col-sm-6 col-sm-offset-3">
      <strong>Group Expenses:</strong>
      <%= link_to 'Add New Expense', new_report_expense_path(@report),
                                     class:'btn btn-default btn-xs' %>
        <table class="table table-striped">
          <tr>
            <th>Vendor</th>
            <th>Date</th>
            <th>Amount</th>
            <th>Who Paid</th>
            <th>Remove?</th>
          </tr>
          <% @report.expenses.each do |expense| %>
            <tr>
              <td><%= expense.vendor %></td>
              <td><%= expense.date %></td>
              <td><%= number_to_currency(expense.amount/100.00) %></td>
              <td><%= expense.person.email %></td>
              <td><%= link_to 'Remove', report_expense_path(@report, expense),
                                        class:'btn btn-danger btn-xs',
                                        method: :delete,
                                        data: { confirm: 'Are you sure?' } %></td>
            </tr>
          <% end %>
        </table>
    </div>
  </div><br>

  <div class="row-fluid">
    <div class="col-xs-12 col-sm-6 col-sm-offset-3 text-right">
      <p>Total: <%= number_to_currency(@report.sum_expenses) %></p>
    </div>
  </div><br>

  <div class="row-fluid">
    <div class="col-xs-12 col-sm-6 col-sm-offset-3">
      <%= form_for @report, :url => report_reconcile_path(@report) do |f| %>
        <%= f.submit 'Reconcile Expenses', class:'btn btn-success btn-sm pull-right' %>
      <% end %>
    </div>
  </div><br><br>

  <div class="row-fluid">
    <div class="col-xs-12 col-sm-3 col-sm-offset-3">
      <%= link_to 'Back to Reports', reports_path,
                                     class:'btn btn-primary btn-sm' %>
    </div>

    <div class="col-xs-12 col-sm-3">
      <%= link_to 'Delete Report', report_path(@report),
                                   class:'btn btn-danger btn-sm pull-right',
                                   method: :delete,
                                   data: { confirm: 'Are you sure?' } %>
    </div>
  </div>
</div>
